{"ast":null,"code":"var _jsxFileName = \"/Users/lou/Documents/Strive/m4-d6-netflix-react/src/components/Movie.jsx\";\nimport React, { Component } from \"react\";\nimport { Col, Modal, Form, InputGroup, FormControl, Button } from \"react-bootstrap\";\nimport CommentList from \"./CommentList\";\n\nclass Movie extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selected: false,\n      newComment: {\n        comment: \"\",\n        rate: 0,\n        elementId: this.props.data.imdbID\n      }\n    };\n\n    this.submitComment = async e => {\n      e.preventDefault();\n      const commentsUrl = \"https://striveschool.herokuapp.com/api/comments/\";\n      const response = await fetch(commentsUrl, {\n        method: \"POST\",\n        body: JSON.stringify(this.state.newComment),\n        headers: {\n          \"Authorization\": \"Basic \" + btoa(\"user17:6DJn4e5qbqb2a4D8\"),\n          \"Content-Type\": \"application/json\"\n        }\n      });\n\n      if (response.ok) {\n        alert(\"Comment added\");\n        this.setState({\n          newComment: {\n            comment: \"\",\n            rate: 0,\n            elementId: this.props.data.imdbID\n          }\n        });\n      } else {\n        alert(\"An error has occurred\");\n      }\n    };\n\n    this.handleRadioChange = e => {\n      let newComment = this.state.newComment;\n      newComment.rate = e.currentTarget.id;\n      this.setState({\n        newComment\n      });\n    };\n\n    this.handleCommentText = e => {\n      let newComment = this.state.newComment;\n      newComment.comment = e.currentTarget.value;\n      this.setState({\n        newComment\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      className: \"mb-2\",\n      key: this.props.data.imdbID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"img-fluid\",\n      src: this.props.data.Poster,\n      alt: \"movie\",\n      onClick: () => {\n        this.setState({\n          selected: !this.state.selected\n        });\n        this.props.fetchComments(this.props.data.imdbID);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.selected,\n      onHide: () => this.setState({\n        selected: !this.state.selected\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, \"Movie comments\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, this.props.comments.length > 0 && this.props.comments[0].elementId === this.props.data.imdbID && /*#__PURE__*/React.createElement(CommentList, {\n      comments: this.props.comments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, \"Add a comment\"), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.submitComment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"my-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, [1, 2, 3, 4, 5].map(value => {\n      return /*#__PURE__*/React.createElement(Form.Check, {\n        inline: true,\n        label: value,\n        type: \"radio\",\n        id: value,\n        name: \"rating\",\n        onClick: this.handleRadioChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 32\n        }\n      });\n    })), /*#__PURE__*/React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      placeholder: \"Write your comment\",\n      \"aria-label\": \"comment\",\n      \"aria-describedby\": \"basic-addon1\",\n      onChange: this.handleCommentText,\n      value: this.state.newComment.comment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }, \"Submit\")))))));\n  }\n\n}\n\nexport default Movie;","map":{"version":3,"sources":["/Users/lou/Documents/Strive/m4-d6-netflix-react/src/components/Movie.jsx"],"names":["React","Component","Col","Modal","Form","InputGroup","FormControl","Button","CommentList","Movie","state","selected","newComment","comment","rate","elementId","props","data","imdbID","submitComment","e","preventDefault","commentsUrl","response","fetch","method","body","JSON","stringify","headers","btoa","ok","alert","setState","handleRadioChange","currentTarget","id","handleCommentText","value","render","Poster","fetchComments","comments","length","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Col,\n  Modal,\n  Form,\n  InputGroup,\n  FormControl,\n  Button,\n} from \"react-bootstrap\";\nimport CommentList from \"./CommentList\";\n\nclass Movie extends Component {\n  state = {\n    selected: false,\n    newComment: {\n      comment: \"\",\n      rate: 0,\n      elementId: this.props.data.imdbID,\n    },\n  };\n\n  submitComment = async (e) => {\n    e.preventDefault();\n    const commentsUrl = \"https://striveschool.herokuapp.com/api/comments/\";\n    const response = await fetch(commentsUrl, {\n      method: \"POST\",\n      body: JSON.stringify(this.state.newComment),\n      headers: {\n        \"Authorization\": \"Basic \" + btoa(\"user17:6DJn4e5qbqb2a4D8\"),\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    if (response.ok) {\n      alert(\"Comment added\");\n      this.setState({\n        newComment: {\n          comment: \"\",\n          rate: 0,\n          elementId: this.props.data.imdbID,\n        },\n      });\n    } else {\n      alert(\"An error has occurred\");\n    }\n  };\n\n  handleRadioChange = (e) => {\n    let newComment = this.state.newComment;\n    newComment.rate = e.currentTarget.id;\n    this.setState({ newComment });\n  };\n\n  handleCommentText = (e) => {\n    let newComment = this.state.newComment;\n    newComment.comment = e.currentTarget.value;\n    this.setState({ newComment });\n  };\n\n  render() {\n    return (\n      <Col className=\"mb-2\" key={this.props.data.imdbID}>\n        <img\n          className=\"img-fluid\"\n          src={this.props.data.Poster}\n          alt=\"movie\"\n          onClick={() => {\n            this.setState({ selected: !this.state.selected });\n            this.props.fetchComments(this.props.data.imdbID);\n          }}\n        />\n        <Modal\n          show={this.state.selected}\n          onHide={() => this.setState({ selected: !this.state.selected })}\n        >\n          <Modal.Header closeButton>\n            <Modal.Title>Movie comments</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <div className=\"my-3\">\n              {this.props.comments.length > 0 &&\n                this.props.comments[0].elementId === this.props.data.imdbID && (\n                  <CommentList comments={this.props.comments} />\n                )}\n              <div className=\"text-center\">\n                <h5 className=\"my-3\">Add a comment</h5>\n                <Form onSubmit={this.submitComment}>\n                  <div className=\"my-3 text-center\">\n                    {\n                      [1,2,3,4,5].map(value => {\n                        return <Form.Check\n                          inline\n                          label={value}\n                          type=\"radio\"\n                          id={value}\n                          name=\"rating\"\n                          onClick={this.handleRadioChange}\n                        />\n                      })\n                    }\n                  </div>\n                  <InputGroup className=\"mb-3\">\n                    <FormControl\n                      placeholder=\"Write your comment\"\n                      aria-label=\"comment\"\n                      aria-describedby=\"basic-addon1\"\n                      onChange={this.handleCommentText}\n                      value={this.state.newComment.comment}\n                    />\n                  </InputGroup>\n                  <Button variant=\"primary\" type=\"submit\">\n                    Submit\n                  </Button>\n                </Form>\n              </div>\n            </div>\n          </Modal.Body>\n        </Modal>\n      </Col>\n    );\n  }\n}\n\nexport default Movie;\n"]},"metadata":{},"sourceType":"module"}