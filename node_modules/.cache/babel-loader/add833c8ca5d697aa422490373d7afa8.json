{"ast":null,"code":"var _jsxFileName = \"/Users/lou/Documents/Strive/m4-d6-netflix-react/src/components/Movie.jsx\";\nimport React, { Component } from \"react\";\nimport { Col, Modal, Form, InputGroup, FormControl, Button } from \"react-bootstrap\";\nimport CommentList from \"./CommentList\";\n\nclass Movie extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      imdbID: \"\",\n      selected: false,\n      comments: [],\n      newComment: {\n        comment: \"\",\n        rate: 0,\n        elementId: this.props.data.imdbID\n      }\n    };\n\n    this.fetchComments = async movieID => {\n      console.log(\"fetching comments for \" + this.state.imdbID);\n      const commentsUrl = \"https://striveschool.herokuapp.com/api/comments/\";\n      const comments = await fetch(commentsUrl + movieID, {\n        headers: {\n          \"Authorization\": \"Basic \" + btoa(\"user17:6DJn4e5qbqb2a4D8\")\n        }\n      }).then(response => response.json());\n      this.setState({\n        comments\n      });\n    };\n\n    this.submitComment = async e => {\n      e.preventDefault();\n      const commentsUrl = \"https://striveschool.herokuapp.com/api/comments/\";\n      const response = await fetch(commentsUrl, {\n        method: \"POST\",\n        body: JSON.stringify(this.state.newComment),\n        headers: {\n          \"Authorization\": \"Basic \" + btoa(\"user17:6DJn4e5qbqb2a4D8\"),\n          \"Content-Type\": \"application/json\"\n        }\n      });\n\n      if (response.ok) {\n        alert(\"Comment added\");\n        this.setState({\n          newComment: {\n            comment: \"\",\n            rate: 0,\n            elementId: this.props.data.imdbID\n          }\n        });\n      } else {\n        alert(\"An error has occurred\");\n      }\n    };\n\n    this.handleRadioChange = e => {\n      let newComment = this.state.newComment;\n      newComment.rate = e.currentTarget.id;\n      this.setState({\n        newComment\n      });\n    };\n\n    this.handleCommentText = e => {\n      let newComment = this.state.newComment;\n      newComment.comment = e.currentTarget.value;\n      this.setState({\n        newComment\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Col, {\n      className: \"mb-2\",\n      key: this.props.data.imdbID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"img-fluid\",\n      src: this.props.data.Poster,\n      alt: \"movie\",\n      onClick: () => {\n        this.setState({\n          selected: !this.state.selected,\n          imdbID: this.props.data.imdbID\n        }, () => {\n          this.fetchComments(this.state.imdbID);\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.selected,\n      onHide: () => this.setState({\n        selected: !this.state.selected\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, \"Movie comments\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, this.state.comments.length > 0 && this.state.comments[0].elementId === this.state.imdbID && /*#__PURE__*/React.createElement(CommentList, {\n      key: Math.random(),\n      comments: this.state.comments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, \"Add a comment\"), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.submitComment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"my-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, [1, 2, 3, 4, 5].map(value => {\n      return /*#__PURE__*/React.createElement(Form.Check, {\n        inline: true,\n        label: value,\n        type: \"radio\",\n        id: value,\n        name: \"rating\",\n        key: this.state.imdbID + \"-rate-\" + {\n          value\n        },\n        onClick: this.handleRadioChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 32\n        }\n      });\n    })), /*#__PURE__*/React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      placeholder: \"Write your comment\",\n      \"aria-label\": \"comment\",\n      \"aria-describedby\": \"basic-addon1\",\n      onChange: this.handleCommentText,\n      value: this.state.newComment.comment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 19\n      }\n    }, \"Submit\")))))));\n  }\n\n}\n\nexport default Movie;","map":{"version":3,"sources":["/Users/lou/Documents/Strive/m4-d6-netflix-react/src/components/Movie.jsx"],"names":["React","Component","Col","Modal","Form","InputGroup","FormControl","Button","CommentList","Movie","state","imdbID","selected","comments","newComment","comment","rate","elementId","props","data","fetchComments","movieID","console","log","commentsUrl","fetch","headers","btoa","then","response","json","setState","submitComment","e","preventDefault","method","body","JSON","stringify","ok","alert","handleRadioChange","currentTarget","id","handleCommentText","value","render","Poster","length","Math","random","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Col,\n  Modal,\n  Form,\n  InputGroup,\n  FormControl,\n  Button,\n} from \"react-bootstrap\";\nimport CommentList from \"./CommentList\";\n\nclass Movie extends Component {\n  state = {\n    imdbID: \"\",\n    selected: false,\n    comments: [],\n    newComment: {\n      comment: \"\",\n      rate: 0,\n      elementId: this.props.data.imdbID,\n    },\n  };\n\n  fetchComments = async (movieID) => {\n    console.log(\"fetching comments for \" + this.state.imdbID)\n    const commentsUrl = \"https://striveschool.herokuapp.com/api/comments/\";\n    const comments = await fetch(commentsUrl + movieID, {\n      headers: {\n        \"Authorization\": \"Basic \" + btoa(\"user17:6DJn4e5qbqb2a4D8\")\n      },\n    }).then((response) => response.json());\n    this.setState({ comments });\n  };\n\n  submitComment = async (e) => {\n    e.preventDefault();\n    const commentsUrl = \"https://striveschool.herokuapp.com/api/comments/\";\n    const response = await fetch(commentsUrl, {\n      method: \"POST\",\n      body: JSON.stringify(this.state.newComment),\n      headers: {\n        \"Authorization\": \"Basic \" + btoa(\"user17:6DJn4e5qbqb2a4D8\"),\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    if (response.ok) {\n      alert(\"Comment added\");\n      this.setState({\n        newComment: {\n          comment: \"\",\n          rate: 0,\n          elementId: this.props.data.imdbID,\n        },\n      });\n    } else {\n      alert(\"An error has occurred\");\n    }\n  };\n\n  handleRadioChange = (e) => {\n    let newComment = this.state.newComment;\n    newComment.rate = e.currentTarget.id;\n    this.setState({ newComment });\n  };\n\n  handleCommentText = (e) => {\n    let newComment = this.state.newComment;\n    newComment.comment = e.currentTarget.value;\n    this.setState({ newComment });\n  };\n\n  render() {\n    return (\n      <Col className=\"mb-2\" key={this.props.data.imdbID}>\n        <img\n          className=\"img-fluid\"\n          src={this.props.data.Poster}\n          alt=\"movie\"\n          onClick={() => {\n            this.setState({ \n              selected: !this.state.selected,\n              imdbID: this.props.data.imdbID\n            }, () => {this.fetchComments(this.state.imdbID)});\n          }}\n        />\n        <Modal\n          show={this.state.selected}\n          onHide={() => this.setState({ selected: !this.state.selected })}\n        >\n          <Modal.Header closeButton>\n            <Modal.Title>Movie comments</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <div className=\"my-3\">\n              {this.state.comments.length > 0 &&\n                this.state.comments[0].elementId === this.state.imdbID && (\n                  <CommentList key={Math.random()} comments={this.state.comments} />\n                )}\n              <div className=\"text-center\">\n                <h5 className=\"my-3\">Add a comment</h5>\n                <Form onSubmit={this.submitComment}>\n                  <div className=\"my-3 text-center\">\n                    {\n                      [1,2,3,4,5].map(value => {\n                        return <Form.Check\n                          inline\n                          label={value}\n                          type=\"radio\"\n                          id={value}\n                          name=\"rating\"\n                          key={this.state.imdbID + \"-rate-\" + {value}}\n                          onClick={this.handleRadioChange}\n                        />\n                      })\n                    }\n                  </div>\n                  <InputGroup className=\"mb-3\">\n                    <FormControl\n                      placeholder=\"Write your comment\"\n                      aria-label=\"comment\"\n                      aria-describedby=\"basic-addon1\"\n                      onChange={this.handleCommentText}\n                      value={this.state.newComment.comment}\n                    />\n                  </InputGroup>\n                  <Button variant=\"primary\" type=\"submit\">\n                    Submit\n                  </Button>\n                </Form>\n              </div>\n            </div>\n          </Modal.Body>\n        </Modal>\n      </Col>\n    );\n  }\n}\n\nexport default Movie;\n"]},"metadata":{},"sourceType":"module"}